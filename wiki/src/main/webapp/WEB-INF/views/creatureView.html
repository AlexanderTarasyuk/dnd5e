<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="layouts/default">
<head>
<title th:text = "${'Dnd 5E '+ creature.name}"></title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" th:href="@{/resources/icon.png}">
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>
	<div th:insert="fragments/header :: header(@{/creatures})"></div>
	<div class="container" style="margin-top: 60px">
		<div class="panel-group" th:object="${creature}">
			<div class="panel panel-primary">
				<div class="panel-heading">
					<h3>
						<span th:text="*{name}"></span>
					</h3>
				</div>
				<div class="panel-body">
					<span th:text="*{size.cyrilicName}"></span> <span
						th:text="*{type.cyrilicName}"></span> <a
						th:if="*{raceName != null}"
						th:href="@{'/creatures/race/' + *{raceId}}"><span
						th:text="*{raceName}"></span></a>, <span
						th:text="*{alignment.cyrilicName}"></span>
				</div>
			</div>
			<div class="panel panel-info">
				<div class="panel-body">
					<div>
						<b>Класс доспеха</b> <span th:text="*{AC}"></span>
					</div>
					<div>
						<b>Хиты</b> <span th:text="*{averageHp}"></span> (<span
							th:text="*{countDiceHp}"></span><span th:text="*{diceHp}"></span><span
							th:if="${creature.bonusHP != null}"> + <span
							th:text="*{bonusHP}"></span></span>)
					</div>
					<div>
						<b>Скорость</b> <span th:text="*{speed}"></span> фт. <span
							th:if="${creature.flySpeed != null}">, летая <span
							th:text="*{flySpeed}"></span> фт.
						</span> <span th:if="${creature.climbingSpeed != null}">, лазая <span
							th:text="*{climbingSpeed}"></span> фт.
						</span> <span th:if="${creature.swimmingSpped != null}">, плавая <span
							th:text="*{swimmingSpped}"></span> фт.
						</span>
					</div>
				</div>
			</div>
			<div class="panel panel-info">
				<div class="panel-body">
					<table class="table text-center">
						<thead>
							<tr>
								<th class="text-center">СИЛ</th>
								<th class="text-center">ЛОВ</th>
								<th class="text-center">ТЕЛ</th>
								<th class="text-center">ИНТ</th>
								<th class="text-center">МДР</th>
								<th class="text-center">ХАР</th>
							</tr>
						</thead>
						<tr>
							<td th:text="${creature.strengthText()}" />
							<td th:text="${creature.dexterityText()}" />
							<td th:text="${creature.constitutionText()}" />
							<td th:text="${creature.intellectText()}" />
							<td th:text="${creature.wizdomText()}" />
							<td th:text="${creature.charismaText()}" />
						</tr>
					</table>
				</div>
			</div>
			<div class="panel panel-info">
				<div class="panel-body">
					<div th:if="*{!savingThrows.empty}">
						<b>Спасброски </b><span
							th:each="savingThrow, iterStat : *{savingThrows}"
							th:text="!${iterStat.last} ? ${savingThrow.text} + ', ': ${savingThrow.text}"></span>
					</div>
					<div th:if="*{!skills.empty}">
						<b>Навыки </b><span th:each="skill, iterStat : *{skills}"
							th:text="${skill.text}"></span>
					</div>
					<div th:if="*{!immunityDamages.empty}">
						<b>Иммунитет к урону </b><span
							th:each="immunityDamage, iterStat : *{immunityDamages}"
							th:text="!${iterStat.last} ? ${immunityDamage.cyrilicName} + ', ': ${immunityDamage.cyrilicName}"></span>
					</div>
					<div th:if="*{!resistanceDamages.empty}">
						<b>Сопротивление к урону </b><span
							th:each="resistanceDamages, iterStat : *{resistanceDamages}"
							th:text="!${iterStat.last} ? ${resistanceDamages.cyrilicName} + ', ': ${resistanceDamages.cyrilicName}"></span>
					</div>
					<div th:if="*{!immunityStates.empty}">
						<b>Иммунитет к состаянию </b><span
							th:each="state, iterStat : *{immunityStates}"
							th:text="!${iterStat.last} ? ${state.cyrilicName} + ', ': ${state.cyrilicName}"></span>
					</div>
					<div>
						<b>Чувства</b> <span th:text="*{vision}"></span>
					</div>
					<div>
						<b>Языки</b> <span th:each="language, iterStat : *{languages}"
							th:text="!${iterStat.last} ? ${language.name} + ', ': ${language.name}">
						</span>
					</div>
					<div>
						<b>Опасность</b> <span th:text="*{challengeRating}"></span> (<span
							th:text="*{exp}"></span> опыта)
					</div>
				</div>
			</div>
			<div class="panel panel-info">
				<div class="panel-body">
					<div th:each="feat : *{feats}">
						<em><b th:text="${feat.name}"></b></em>
						<div th:utext="${feat.description}"></div>
					</div>
				</div>
			</div>
			<div th:if="${!actions.empty}" class="panel panel-info">
				<div class="panel-heading">Действия</div>
				<div class="panel-body">
					<div th:each="action : ${actions}">
						<b th:text="${action.name}"></b>
						<div th:utext="${action.description}"></div>
					</div>
				</div>
			</div>
			<div th:if="${!reactions.empty}" class="panel panel-warning">
				<div class="panel-heading">Реакции</div>
				<div class="panel-body">
					<div th:each="action : ${reactions}">
						<b th:text="${action.name}"></b>
						<div th:utext="${action.description}"></div>
					</div>
				</div>
			</div>
			<div th:if="${!legendary.empty}" class="panel panel-danger">
				<div class="panel-heading">Легендарные действия</div>
				<div class="panel-body">
					<div th:each="action : ${legendary}">
						<b th:text="${action.name}"></b>
						<div th:utext="${action.description}"></div>
					</div>
				</div>
			</div>
			<div th:if="${creature.description != null}" class="panel panel-info">
				<div class="panel-heading">Описание</div>
				<div class="panel-body">
					<span th:utext="*{description}"></span>
				</div>
			</div>
		</div>
		<div class="panel panel-info">
			<div class="panel-body">
				<img class="img-responsive center-block"
					th:src="@{'/resources/creatures/'+ ${creature.id} +'.jpg'}"
					align="middle" />
			</div>
		</div>
	</div>
</body>
</html>